import{_ as a,e as t,f as s,o as n}from"./app-fvSY76QE.js";const i={};function d(l,e){return n(),t("div",null,e[0]||(e[0]=[s(`<h2 id="准备内容" tabindex="-1"><a class="header-anchor" href="#准备内容"><span>准备内容</span></a></h2><ul><li>Ubuntu启动盘</li><li>数据盘（存放备份数据）</li></ul><h2 id="备份" tabindex="-1"><a class="header-anchor" href="#备份"><span>备份</span></a></h2><h3 id="_1、开机选择通过u盘启动盘启动" tabindex="-1"><a class="header-anchor" href="#_1、开机选择通过u盘启动盘启动"><span>1、开机选择通过U盘启动盘启动；</span></a></h3><h3 id="_2、安装partclone" tabindex="-1"><a class="header-anchor" href="#_2、安装partclone"><span>2、安装partclone；</span></a></h3><div class="language- line-numbers-mode" data-ext="" data-title=""><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>sudo apt install partclone</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_3、备份分区" tabindex="-1"><a class="header-anchor" href="#_3、备份分区"><span>3、备份分区</span></a></h3><div class="language- line-numbers-mode" data-ext="" data-title=""><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>sudo partclone.ext4 -c -s /dev/sda2 -o /mnt/bak/root.img</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>备份顺序（根分区、EFI分区、boot、/home）</p><h3 id="_4、备份分区表" tabindex="-1"><a class="header-anchor" href="#_4、备份分区表"><span>4、备份分区表</span></a></h3><div class="language- line-numbers-mode" data-ext="" data-title=""><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>sudo sfdisk -d /dev/sda &gt; /mnt/bak/sda-partition-table.txt</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="恢复" tabindex="-1"><a class="header-anchor" href="#恢复"><span>恢复</span></a></h2><p><mark>若使用根目录或其他目录使用lvm，则lvm名保持不变；磁盘大小要大于等于原分区</mark></p><h3 id="_1、恢复分区表" tabindex="-1"><a class="header-anchor" href="#_1、恢复分区表"><span>1、恢复分区表</span></a></h3><div class="language- line-numbers-mode" data-ext="" data-title=""><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>sudo sfdisk /dev/sda &lt; /mnt/bak/sda-partition-table.txt</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_2、恢复分区" tabindex="-1"><a class="header-anchor" href="#_2、恢复分区"><span>2、恢复分区</span></a></h3><div class="language- line-numbers-mode" data-ext="" data-title=""><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>sudo partclone.ext4 -r -s /mnt/bak/root.img -O /dev/sda2 -L /tmp/root.log</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>恢复顺序（boot分区、EFI分区、根分区、/home分区）</p><h3 id="_3、修复grub" tabindex="-1"><a class="header-anchor" href="#_3、修复grub"><span>3、修复grub</span></a></h3><ul><li>UEFI系统</li></ul><div class="language- line-numbers-mode" data-ext="" data-title=""><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>grub-install --target=x86_64-efi --efi-directory=/boot/efi --bootloader-id=ubuntu update-grub</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>BIOS系统</li></ul><div class="language- line-numbers-mode" data-ext="" data-title=""><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>grub-install /dev/sda update-grub</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_4、退出重启" tabindex="-1"><a class="header-anchor" href="#_4、退出重启"><span>4、退出重启</span></a></h3><div class="language- line-numbers-mode" data-ext="" data-title=""><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>exit</span></span>
<span class="line"><span>sudo reboot</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div>`,25)]))}const r=a(i,[["render",d],["__file","index.html.vue"]]),c=JSON.parse('{"path":"/os/linux/tkt573qp/","title":"Ubuntu_p2v","lang":"zh-CN","frontmatter":{"title":"Ubuntu_p2v","createTime":"2025/04/17 09:10:20","permalink":"/os/linux/tkt573qp/","description":"准备内容 Ubuntu启动盘 数据盘（存放备份数据） 备份 1、开机选择通过U盘启动盘启动； 2、安装partclone； 3、备份分区 备份顺序（根分区、EFI分区、boot、/home） 4、备份分区表 恢复 若使用根目录或其他目录使用lvm，则lvm名保持不变；磁盘大小要大于等于原分区 1、恢复分区表 2、恢复分区 恢复顺序（boot分区、EFI...","head":[["meta",{"property":"og:url","content":"http://git.x-echo.net/os/linux/tkt573qp/"}],["meta",{"property":"og:site_name","content":"谈呀"}],["meta",{"property":"og:title","content":"Ubuntu_p2v"}],["meta",{"property":"og:description","content":"准备内容 Ubuntu启动盘 数据盘（存放备份数据） 备份 1、开机选择通过U盘启动盘启动； 2、安装partclone； 3、备份分区 备份顺序（根分区、EFI分区、boot、/home） 4、备份分区表 恢复 若使用根目录或其他目录使用lvm，则lvm名保持不变；磁盘大小要大于等于原分区 1、恢复分区表 2、恢复分区 恢复顺序（boot分区、EFI..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-04-17T00:02:37.000Z"}],["meta",{"property":"article:modified_time","content":"2025-04-17T00:02:37.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Ubuntu_p2v\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-04-17T00:02:37.000Z\\",\\"author\\":[]}"]]},"headers":[],"readingTime":{"minutes":0.67,"words":200},"git":{"updatedTime":1744848157000,"contributors":[{"name":"wyutan","username":"wyutan","email":"90786339+wyutan@users.noreply.github.com","commits":6,"avatar":"https://avatars.githubusercontent.com/wyutan?v=4","url":"https://github.com/wyutan"}],"changelog":[{"hash":"497cc8e08c4082abfdf8ba018cd0aa767ac91efb","date":1744094862000,"email":"90786339+wyutan@users.noreply.github.com","author":"wyutan","message":"Create 6.Ubuntu_p2v.md","commitUrl":"https://github.com/wyutan/tanya//commit/497cc8e08c4082abfdf8ba018cd0aa767ac91efb"},{"hash":"6910009631945d14ef6b10a220110cffe185bc8a","date":1744266944000,"email":"90786339+wyutan@users.noreply.github.com","author":"wyutan","message":"Update 6.Ubuntu_p2v.md","commitUrl":"https://github.com/wyutan/tanya//commit/6910009631945d14ef6b10a220110cffe185bc8a"},{"hash":"060199ba4012ac0b794621b186577d3227258f5a","date":1744267007000,"email":"90786339+wyutan@users.noreply.github.com","author":"wyutan","message":"Update 6.Ubuntu_p2v.md","commitUrl":"https://github.com/wyutan/tanya//commit/060199ba4012ac0b794621b186577d3227258f5a"},{"hash":"7a5bdaa2252e5c740ab739bcb3c78606835aeedb","date":1744267490000,"email":"90786339+wyutan@users.noreply.github.com","author":"wyutan","message":"Update 6.Ubuntu_p2v.md","commitUrl":"https://github.com/wyutan/tanya//commit/7a5bdaa2252e5c740ab739bcb3c78606835aeedb"},{"hash":"15d7fb116e0ad34d437f684e01d6e2bebdbd8911","date":1744797106000,"email":"90786339+wyutan@users.noreply.github.com","author":"wyutan","message":"Update 6.Ubuntu_p2v.md","commitUrl":"https://github.com/wyutan/tanya//commit/15d7fb116e0ad34d437f684e01d6e2bebdbd8911"},{"hash":"d02a27772ef28c3b16069fab5bba270486f4a3ce","date":1744848157000,"email":"90786339+wyutan@users.noreply.github.com","author":"wyutan","message":"Update 6.Ubuntu_p2v.md","commitUrl":"https://github.com/wyutan/tanya//commit/d02a27772ef28c3b16069fab5bba270486f4a3ce"}]},"autoDesc":true,"filePathRelative":"os/linux/常用/6.Ubuntu_p2v.md"}');export{r as comp,c as data};
