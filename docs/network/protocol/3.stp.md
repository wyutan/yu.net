## 选路原则

# 生成树
## 生成树选举

1. **Bridge ID（桥标识）的比较**：
   - 每个交换机都有一个唯一的 Bridge ID，由优先级（Priority）和 MAC 地址组成。选举过程开始时，所有交换机都自称为根桥，并将自己的 Bridge ID 设置为根桥的 Bridge ID。

2. **Bridge ID 的比较**：
   - 如果有多个交换机具有相同的 Bridge ID，则比较它们的 MAC 地址，MAC 地址较小的交换机将成为根桥。如果 MAC 地址也相同，则比较交换机的优先级，优先级较小的交换机将成为根桥。

3. **Root Port（根端口）的选择**：
   - 在每个非根交换机上，选择到根桥具有最低路径成本的端口作为根端口。路径成本是通过端口到达根桥的路径上的链路成本之和。

4. **Designated Port（指定端口）的选择**：
   - 在每个网段上，选择到根桥具有最低路径成本的交换机端口作为指定端口。其他端口将被设置为阻塞端口，以防止环路的形成。

5. **阻塞端口的确定**：
   - 除了根端口和指定端口外，其余端口将被设置为阻塞状态，不参与数据转发，以确保生成树拓扑结构无环。

6. **信息交换和更新**：
   - 当交换机间的拓扑发生变化时，例如链路故障或新交换机加入网络，生成树协议会通过发送 Bridge Protocol Data Units (BPDU) 来通知其他交换机，从而触发重新选举过程。
